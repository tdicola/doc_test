

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>PDMIn -- Record an input PDM audio stream &mdash; Adafruit CircuitPython 0.0.0 documentation</title>
  

  
  
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="../../genindex.html"/>
        <link rel="search" title="Search" href="../../search.html"/>
    <link rel="top" title="Adafruit CircuitPython 0.0.0 documentation" href="../../index.html"/>
        <link rel="up" title="audiobusio --- Support for audio input and output over digital bus" href="__init__.html"/>
        <link rel="next" title="audioio --- Support for audio input and output" href="../audioio/__init__.html"/>
        <link rel="prev" title="audiobusio --- Support for audio input and output over digital bus" href="__init__.html"/> 

  
  <script src="../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../index.html" class="icon icon-home"> Adafruit CircuitPython
          

          
          </a>

          
            
            
              <div class="version">
                0.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Core Modules</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../index.html#support-matrix">Support Matrix</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../index.html#modules">Modules</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../analogio/__init__.html"><code class="docutils literal"><span class="pre">analogio</span></code> --- Analog hardware support</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="__init__.html"><code class="docutils literal"><span class="pre">audiobusio</span></code> --- Support for audio input and output over digital bus</a><ul class="current">
<li class="toctree-l4 current"><a class="current reference internal" href="#"><code class="docutils literal"><span class="pre">PDMIn</span></code> -- Record an input PDM audio stream</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../audioio/__init__.html"><code class="docutils literal"><span class="pre">audioio</span></code> --- Support for audio input and output</a></li>
<li class="toctree-l3"><a class="reference internal" href="../bitbangio/__init__.html"><code class="docutils literal"><span class="pre">bitbangio</span></code> --- Digital protocols implemented by the CPU</a></li>
<li class="toctree-l3"><a class="reference internal" href="../board/__init__.html"><code class="docutils literal"><span class="pre">board</span></code> --- Board specific pin names</a></li>
<li class="toctree-l3"><a class="reference internal" href="../busio/__init__.html"><code class="docutils literal"><span class="pre">busio</span></code> --- Hardware accelerated behavior</a></li>
<li class="toctree-l3"><a class="reference internal" href="../digitalio/__init__.html"><code class="docutils literal"><span class="pre">digitalio</span></code> --- Basic digital pin support</a></li>
<li class="toctree-l3"><a class="reference internal" href="../microcontroller/__init__.html"><code class="docutils literal"><span class="pre">microcontroller</span></code> --- Pin references and core functionality</a></li>
<li class="toctree-l3"><a class="reference internal" href="../multiterminal/__init__.html"><code class="docutils literal"><span class="pre">multiterminal</span></code> --- Manage additional terminal sources</a></li>
<li class="toctree-l3"><a class="reference internal" href="../neopixel_write/__init__.html"><code class="docutils literal"><span class="pre">neopixel_write</span></code> --- Low-level neopixel implementation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../os/__init__.html"><code class="docutils literal"><span class="pre">os</span></code> --- functions that an OS normally provides</a></li>
<li class="toctree-l3"><a class="reference internal" href="../pulseio/__init__.html"><code class="docutils literal"><span class="pre">pulseio</span></code> --- Support for pulse based protocols</a></li>
<li class="toctree-l3"><a class="reference internal" href="../random/__init__.html"><code class="docutils literal"><span class="pre">random</span></code> --- psuedo-random numbers and choices</a></li>
<li class="toctree-l3"><a class="reference internal" href="../storage/__init__.html"><code class="docutils literal"><span class="pre">storage</span></code> --- storage management</a></li>
<li class="toctree-l3"><a class="reference internal" href="../time/__init__.html"><code class="docutils literal"><span class="pre">time</span></code> --- time and timing related functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../touchio/__init__.html"><code class="docutils literal"><span class="pre">touchio</span></code> --- Touch related IO</a></li>
<li class="toctree-l3"><a class="reference internal" href="../uheap/__init__.html"><code class="docutils literal"><span class="pre">uheap</span></code> --- Heap size analysis</a></li>
<li class="toctree-l3"><a class="reference internal" href="../usb_hid/__init__.html"><code class="docutils literal"><span class="pre">usb_hid</span></code> --- USB Human Interface Device</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ustack/__init__.html"><code class="docutils literal"><span class="pre">ustack</span></code> --- Stack information and analysis</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../docs/drivers.html">Additional Libraries on GitHub</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../docs/common_hal.html">Adding <code class="docutils literal"><span class="pre">*io</span></code> support to other ports</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../docs/design_guide.html">Design Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../docs/supported_ports.html">Supported Ports</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../docs/library/index.html">MicroPython libraries</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../README.html">Adafruit CircuitPython</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../CONTRIBUTING.html">Contributing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../CODE_OF_CONDUCT.html">Contributor Covenant Code of Conduct</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../license.html">MicroPython &amp; CircuitPython license information</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Adafruit CircuitPython</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../index.html">Core Modules</a> &raquo;</li>
        
          <li><a href="__init__.html"><code class="docutils literal"><span class="pre">audiobusio</span></code> --- Support for audio input and output over digital bus</a> &raquo;</li>
        
      <li><code class="docutils literal"><span class="pre">PDMIn</span></code> -- Record an input PDM audio stream</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../_sources/shared-bindings/audiobusio/PDMIn.c.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="pdmin-record-an-input-pdm-audio-stream">
<h1><a class="reference internal" href="#audiobusio.PDMIn" title="audiobusio.PDMIn"><code class="xref py py-class docutils literal"><span class="pre">PDMIn</span></code></a> -- Record an input PDM audio stream<a class="headerlink" href="#pdmin-record-an-input-pdm-audio-stream" title="Permalink to this headline">Â¶</a></h1>
<p>PDMIn can be used to record an input audio signal on a given set of pins.</p>
<dl class="class">
<dt id="audiobusio.PDMIn">
<em class="property">class </em><code class="descclassname">audiobusio.</code><code class="descname">PDMIn</code><span class="sig-paren">(</span><em>clock_pin</em>, <em>data_pin</em>, <em>*</em>, <em>frequency=8000</em>, <em>bit_depth=8</em>, <em>mono=True</em>, <em>oversample=64</em><span class="sig-paren">)</span><a class="headerlink" href="#audiobusio.PDMIn" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Create a PDMIn object associated with the given pins. This allows you to
record audio signals from the given pins. Individual ports may put further
restrictions on the recording parameters.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>clock_pin</strong> (<a class="reference internal" href="../microcontroller/Pin.html#microcontroller.Pin" title="microcontroller.Pin"><em>Pin</em></a>) -- The pin to output the clock to</li>
<li><strong>data_pin</strong> (<a class="reference internal" href="../microcontroller/Pin.html#microcontroller.Pin" title="microcontroller.Pin"><em>Pin</em></a>) -- The pin to read the data from</li>
<li><strong>frequency</strong> (<a class="reference internal" href="../../docs/library/builtins.html#int" title="int"><em>int</em></a>) -- Target frequency of the resulting samples. Check <a class="reference internal" href="#audiobusio.PDMIn.frequency" title="audiobusio.PDMIn.frequency"><code class="xref any py py-attr docutils literal"><span class="pre">frequency</span></code></a> for real value.</li>
<li><strong>bit_depth</strong> (<a class="reference internal" href="../../docs/library/builtins.html#int" title="int"><em>int</em></a>) -- Final number of bits per sample. Must be divisible by 8</li>
<li><strong>mono</strong> (<a class="reference internal" href="../../docs/library/builtins.html#bool" title="bool"><em>bool</em></a>) -- True when capturing a single channel of audio, captures two channels otherwise</li>
<li><strong>oversample</strong> (<a class="reference internal" href="../../docs/library/builtins.html#int" title="int"><em>int</em></a>) -- Number of single bit samples to decimate into a final sample. Must be divisible by 8</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>Simple record to buffer:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">audiobusio</span>
<span class="kn">import</span> <span class="nn">board</span>

<span class="c1"># Prep a buffer to record into</span>
<span class="n">b</span> <span class="o">=</span> <span class="nb">bytearray</span><span class="p">(</span><span class="mi">200</span><span class="p">)</span>
<span class="k">with</span> <span class="n">audiobusio</span><span class="o">.</span><span class="n">PDMIn</span><span class="p">(</span><span class="n">board</span><span class="o">.</span><span class="n">MICROPHONE_DATA</span><span class="p">,</span> <span class="n">board</span><span class="o">.</span><span class="n">MICROPHONE_CLOCK</span><span class="p">)</span> <span class="k">as</span> <span class="n">mic</span><span class="p">:</span>
    <span class="n">mic</span><span class="o">.</span><span class="n">record</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">b</span><span class="p">))</span>
</pre></div>
</div>
<dl class="method">
<dt id="audiobusio.PDMIn.deinit">
<code class="descname">deinit</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#audiobusio.PDMIn.deinit" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Deinitialises the PWMOut and releases any hardware resources for reuse.</p>
</dd></dl>

<dl class="method">
<dt id="audiobusio.PDMIn.__enter__">
<code class="descname">__enter__</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#audiobusio.PDMIn.__enter__" title="Permalink to this definition">Â¶</a></dt>
<dd><p>No-op used by Context Managers.</p>
</dd></dl>

<dl class="method">
<dt id="audiobusio.PDMIn.__exit__">
<code class="descname">__exit__</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#audiobusio.PDMIn.__exit__" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Automatically deinitializes the hardware when exiting a context.</p>
</dd></dl>

<dl class="method">
<dt id="audiobusio.PDMIn.record">
<code class="descname">record</code><span class="sig-paren">(</span><em>destination</em>, <em>destination_length</em><span class="sig-paren">)</span><a class="headerlink" href="#audiobusio.PDMIn.record" title="Permalink to this definition">Â¶</a></dt>
<dd><p>Records destination_length bytes of samples to destination. This is
blocking.</p>
<p>An IOError may be raised when the destination is too slow to record the
audio at the given rate. For internal flash, writing all 1s to the file
before recording is recommended to speed up writes.</p>
</dd></dl>

<dl class="attribute">
<dt id="audiobusio.PDMIn.frequency">
<code class="descname">frequency</code><a class="headerlink" href="#audiobusio.PDMIn.frequency" title="Permalink to this definition">Â¶</a></dt>
<dd><p>The actual frequency of the recording. This may not match the constructed
frequency due to internal clock limitations.</p>
</dd></dl>

</dd></dl>

</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../audioio/__init__.html" class="btn btn-neutral float-right" title="audioio --- Support for audio input and output" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="__init__.html" class="btn btn-neutral" title="audiobusio --- Support for audio input and output over digital bus" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2014-2017, MicroPython &amp; CircuitPython contributors (https://github.com/adafruit/circuitpython/graphs/contributors).
      Last updated on 17 Aug 2017.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../',
            VERSION:'0.0.0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>